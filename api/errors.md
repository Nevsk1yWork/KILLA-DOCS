# Ошибки

## HTTP статусы

* **401** — отсутствует/неверный токен
* **400** — неверный запрос (параметры/валидация)
* **5xx** — ошибка upstream/внутренняя ошибка

## Единый формат ответа

Успех:

```json
{
  "ok": true,
  "data": {}
}
```

Ошибка:

```json
{
  "ok": false,
  "error": {
    "code": "invalid_request",
    "message": "Bad request",
    "details": null
  }
}
```

## Частые коды ошибок

* `invalid_token` — токен не принят (проверь заголовок Authorization)
* `invalid_request` — неверные параметры/формат запроса
* `insufficient_funds` — недостаточно средств
* `provider_error` — временная ошибка upstream
* `internal_error` — внутренняя ошибка сервиса

## Рекомендации

* Для **provider\_error / 5xx**: сделай повтор через 10–30 секунд (1–3 попытки).
* Для **400**: исправь параметры (сверяйся с OpenAPI).
* Для **401**: проверь токен или сбрось его в боте и обнови в интеграции.
